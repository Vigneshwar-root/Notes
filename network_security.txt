Network Security 

-> Home router security
-> Network hacking techniques 
-> Port and vulnerability scanning
-> Secure network architectures 
-> Custom router firmware
-> Firewalls - virtual, host and network
-> Wi-Fi and wireless network security 
-> Network attacks 
-> Network monitoring - finding hackers and malware 


---------------------------------------------------------------------------------------------
Routers - Port and Vulnerability scanning 
---------------------------------------------------------------------------------------------

Network Security:

Windows Router Gateway 

> route print 

> ipconfig -> internal IP address 


Router has an external IP address(which will communicate to internet)[Public IP Address which ISP assigns] and an internal IP address (192.168.1.1) [Private IP Address]

Note: Since there are a limited number of public IPs available, it’s not practical to assign a unique public IP address to every device on your home network. Instead, NAT allows all devices in your local network to share a single public IP address.

whatismyipaddress.com -> expose external ip address , this will be ISP(Internet service provider) based IP address 


Service called NAT(Network address translation) - in order to internet connected to the internal devices NAT will specifically have a port to each internal device (Port Forwarding) (DMZ)

Summary of the Basic NAT Process:

    A device in the local network sends a request to the internet using a private IP.
    The router replaces the private IP with its own public IP and adds a port number for tracking.
    The response comes back to the public IP and port number.
    The router uses the port number to forward the response to the correct internal device.

Eg:

Xbox 53(Port)   IP(Internal Device IP) 


Home Router -> consists of a collection of -> Router , Modem, Firewall, Switch, Wireless access point

	Switch -> a table of Ethernet MAC addresses -> uses unique MAC addresses for our device to send traffic -> Once data is travelling on our local network IP address(used on the internet when we have some sort of routing device) are not used anymore MAC addresses are used for traffic to find its destination 

	If we have Switch or Hub we have MAC addresses 

	We cannot sniff traffic with a network with a switch, because traffic only gets forwarded to the correct physical lamp port based on the MAC Address 

	When the traffic goes in to the switch or router, the switch knows what the MAC address is So instead of sending data to all the devices it just sends to that one physical port and down that wire -> thas the isolated collision domain 
	
	Summary of How a Switch Works:

		Learning: The switch builds a MAC address table by learning which devices (MAC addresses) are connected to which ports.
		Forwarding: When a device sends data to another device, the switch looks at the destination MAC address and forwards the data to the appropriate port.
		Flooding: If the switch doesn’t know the destination MAC address, it broadcasts the data to all ports (flooding) until it learns where the device is.
		Collision Domains: Each port on a switch is its own collision domain, reducing network congestion and improving performance.
		Efficient Communication: Switches enable full-duplex communication, allowing devices to send and receive data at the same time.
		
		The switch uses frames to send data across the network. A frame is a small chunk of data that includes:

			Destination MAC address: The address of the device the data is meant for.
			Source MAC address: The address of the device sending the data.
			Data: The actual information being transmitted (e.g., a file, a request, etc.).
	
	-------------------------------------------
	Firewall -> allow and deny traffic based on the set of rules 
	
	IP tables is commonly used as firewall in many routers which works on Network(3 Packets) and transport layer(4 TCP , UDP) 
	
	Firewall wall can work on application layer (5,6,7) which is known as deep packet inspection firewall or can be called a proxy Firewall or application Firewall 
	
	In our router we have IP tables if anything at all 
	
	Firewalls keeps logs of traffic if they are configured to do so 
	
	
	---------------------------------------
	
	Routers within have a router , but an actual router that is just a router routes traffic from one network to other network based on information in the IP routing table within the router 
	
	On a local network, this is usually from the LAN to the WAN or the local network to the internet so essentially the router function is to pass 
	network traffic from your local network to the internet and from the internet to your local network 
	
	Routers work at layer 3 and route IP packets between networks 
	
	Something is a different network when it has different subnet 
	
	-------------------------------------------
	
	Modem -> they modulate and demodulate the signal so it can be passed in to local loop of your network carrier 
	
	It works at the physical layer ther to start sending the photons and electrons onto the internet 
	
	and you may have something called a bridge which forwards packets and filters based on the MAC addresses 
	
	It forwards broadcast traffic but not collisions and it works at the data link layer (layer 2 )
	
	------------------------------------------
	
	The wireless access points -> this works similar to switch but for wireless devices, it is the wireless transmitter and receiver built in to your router 
	It uses unique MAC addresses of your devices to send traffic to their destination and works at the data link layer (2) 
	somethem may have seperate access point but now they are built into the router 
	
	---------------------------------------
	
	Home router also offers services like DHCP which assigns IP address to the devices , DNS to resolve domain name in to the IP addresses,
	port forwarding and NAT  
	
	-------------------------------------------------
	External Vulnerability Scanning
	
	
	Shodan - https://www.shodan.io/search 
	for exploring vulnerable routers
	we can find whethers routers are secured and we can learn by analyzing common vulnerabilities
	
	better we can go on to the routers webadmin interface for more details
	
	UPnP - Universal plug and play - this allows port forwarding to set up automatically 
	
	we have to check router is up to date with patches 
	
	we can ssh or telnet the router using the internal IP address (web admin )
	
	route print | findstr "192.168.1.1"
	
	----------------------
	pentest-tools.com - TCP Port Scan with Nmap 
	
	Port scanning is potentially legal to do on the devices we dont own in US 
	
	another site - mxtoolbox.com 
	
	Qualys - free scan for vulernability 
	
	
	----------------------------------------------------------
	Internal Vulnerability Scanning
	-------------------------------------------------------------------------
Internal Vulnerability Scanning

		For checking whether or not we are using DHCP - ipconfig /all |more (Windows)
		
			cat /var/log/syslog | grep DHCP - Kali / Debian 
		
			lets map the local network to see what devices we have got couple of tools - nmap and Zenmap 
		
				root@kali - nmap (Zenmap is the GUI for nmap)
		
			If you are running a VM for Kali, make sure the network card is in Bridge mode 
		
			nmap and zen map is also available for Windows and MAC users which we can get here
			- https://nmap.org/download.html  windows we can download with Choco and for MAC we can download with Brew 
		
		So I need to determine what my local network is so we can look at what our subnet mask and IP address is 
		
			ip a show eth0 (Kali)
			
			IP Address is 192.168.1.40/24(subnet mask)
			-----------------------------------------------------------
			Subnet Mask in detail:
				An IP address is a unique identifier assigned to each device on a network. It consists of 32 bits (in IPv4) represented as four sets of numbers separated by periods. For example, 192.168.0.1 is an IP address.
				A subnet mask, also represented as a series of 32 bits, helps determine the network and host portions of an IP address. It does so by "masking" or "filtering" certain bits to indicate which part belongs to the network and which part belongs to the host.
				In binary representation, a subnet mask typically consists of a contiguous series of 1s followed by a series of 0s. The number of 1s determines the size of the network portion. For example, a subnet mask of 255.255.255.0 in binary is 11111111.11111111.11111111.00000000. This means the first 24 bits (or the first three sets of numbers) are part of the network portion, and the remaining 8 bits (or the last set of numbers) are part of the host portion.
				By applying the subnet mask to an IP address using a bitwise logical AND operation, you can separate the network portion from the host portion. This information is crucial for routing data within a network, as it allows devices to determine if a destination IP address is on the same network or on a different network.
				In summary, a subnet mask is a numerical value used to determine the network and host portions of an IP address, enabling efficient routing and communication within a network.
			
			-----------------------------------------------------------
			192.168.1 - this is network 
			.40 - are the devices (1 to 255 possible devices for this network or subnet)
			
			
			nmap -T4 -F 192.168.1.0/24 
				(T is for fast execution and F is for few ports)
				So it found 5 host and it found ports on all of them 
				
			Zen map - Target - 192.168.1.1-254
				Command - nmap - T4 -A -v 192.168.1.1-254 (instead of putting /24 subnet mask on)
				-> this gives graphical view of the network 
				-> A is for OS detection, version detection, script scanning, and trace route v - verbose 
				This will take time as we are doing verbose and full detection 
	
	
	
	
	
	
	







